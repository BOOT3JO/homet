<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>장바구니</title>
<link rel="stylesheet" href="/resources/css/header.css">
<link rel="stylesheet" href="/resources/css/footer.css">
</head>
<body>
	<div th:fragment="menu" th:replace="include/header :: menu"></div>
	<h1>장바구니</h1>
	<a href="/">홈으로</a>
	<div th:each="kit, i : ${session.cart}">
		<div th:text="|밀키트${i.index+1}|"></div>
		<span th:text="${kit.price}" class="price"></span>
		<span>원</span>
		<ul th:each="vo : ${kit.list}">
			<li>
				<span th:text="${vo.name}"></span>
				<span th:text="${vo.price}"></span>
			</li>
		</ul>
	</div>
	<div th:each="kit, i : ${session.cart_set}">
		<div th:text="${kit.name}"></div>
		<span th:text="${kit.price}" class="price"></span>
		<span>원</span>
		<ul th:each="vo : ${kit.list}">
			<li>
				<span th:text="${vo.name}"></span>
				<span th:text="${vo.price}"></span>
			</li>
		</ul>
	</div>
	<div id="price_all"></div>
	<button onclick="order()">주문하기</button>
	<div th:fragment="footer" th:replace="include/footer :: footer"></div>
</body>

<script type="text/javascript">

	let price_all = 0;
	const $price = document.getElementsByClassName("price");
	
	for( let i = 0; i < $price.length; i++ ){ 
		let price = $price.item(i).innerText;
		price_all+= parseInt(price);
	}
	
	document.getElementById("price_all").innerHTML = "총 결제금액 : " + price_all + "원";
	
	const order = function(){
		window.location.href="/mealkit/order?type=1";
	}
</script>
</html>