package com.homet.controller;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.annotation.PostConstruct;

import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.homet.model.Health;

@org.springframework.web.bind.annotation.RestController
public class RestController {
	private Map<String, Health> RestMap;
	
	/*
	 * @PostConstruct public void init() { userMap = new HashMap<String, Health>();
	 * userMap.put("1", new Health("1","홍길동", "강남구 대치 1동")); userMap.put("2", new
	 * Health("2","동길홍", "강남구 대치 2동")); userMap.put("3", new Health("3","길홍동",
	 * "강남구 대치 3동")); }
	 */

	@GetMapping("/Rest/{hidx}")
	public Health getHealth(@PathVariable("hidx")String hidx) {
		return healthMap.get(hidx);
	}
	
	@GetMapping("/Rest/all")
	public List<Health> getUserProfileList(){
		return new ArrayList<Health>(healthMap.values());
	}
	
	//get 조회 // post 입력 //put 수정 // delete 삭제
	
	@PutMapping("/Rest/{hidx}")
	public void putHealth(@PathVariable("hidx")String hidx,@RequestParam("name")String name, @RequestParam("address")String address) {
		Health heal = new Health(hidx,name,address);
		healthMap.put(hidx, heal);
		
	}
	@PostMapping("/Rest/{hidx}")
	public void postUserProfile(@PathVariable("hidx")String hidx,@RequestParam("name")String name, @RequestParam("address")String address) {
		Health health = healthMap.get(hidx);
		health.setName(name);
		health.setAddress(address);
	}
	
	@DeleteMapping("/Rest/{hidx}")
	public void deleteUserProfile(@PathVariable("hidx")String hidx) {
		healthMap.remove(hidx);
		}
}
